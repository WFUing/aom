blocks:
  - kind: appDef_block
    name: first-vela-app
    appBlocks:
      - key: apiVersion
        value:
          kind: v_string
          value: core.oam.dev/v1beta1
      - kind: comp_block
        name: express-server
        props:
          - key: type
            value:
              kind: v_string
              value: webservice
          - key: properties
            value:
              kind: v_object
              props:
                - key: image
                  value:
                    kind: v_string
                    value: oamdev/hello-world
                - key: ports
                  value:
                    kind: v_list
                    items:
                      - kind: v_object
                        props:
                          - key: port
                            value:
                              kind: v_int
                              value: 8000
                          - key: expose
                            value:
                              kind: v_bool
                              value: true
          - key: traits
            value:
              kind: v_list
              items:
                - kind: v_object
                  props:
                    - key: type
                      value:
                        kind: v_string
                        value: scaler
                    - key: properties
                      value:
                        kind: v_object
                        props:
                          - key: replicas
                            value:
                              kind: v_int
                              value: 1
      - kind: policy_block
        name: target-default
        props:
          - key: type
            value:
              kind: v_string
              value: topology
          - key: properties
            value:
              kind: v_object
              props:
                - key: clusters
                  value:
                    kind: v_list
                    items:
                      - kind: v_string
                        value: local
                - key: namespace
                  value:
                    kind: v_string
                    value: default
      - kind: policy_block
        name: target-prod
        props:
          - key: type
            value:
              kind: v_string
              value: topology
          - key: properties
            value:
              kind: v_object
              props:
                - key: clusters
                  value:
                    kind: v_list
                    items:
                      - kind: v_string
                        value: local
                - key: namespace
                  value:
                    kind: v_string
                    value: prod
      - kind: policy_block
        name: deploy-ha
        props:
          - key: type
            value:
              kind: v_string
              value: override
          - key: properties
            value:
              kind: v_object
              props:
                - key: components
                  value:
                    kind: v_list
                    items:
                      - kind: v_object
                        props:
                          - key: type
                            value:
                              kind: v_string
                              value: webservice
                          - key: traits
                            value:
                              kind: v_list
                              items:
                                - kind: v_object
                                  props:
                                    - key: type
                                      value:
                                        kind: v_string
                                        value: scaler
                                    - key: properties
                                      value:
                                        kind: v_object
                                        props:
                                          - key: replicas
                                            value:
                                              kind: v_int
                                              value: 2
      - kind: workflow_block
        name: deploy2default
        props:
          - key: type
            value:
              kind: v_string
              value: deploy
          - key: properties
            value:
              kind: v_object
              props:
                - key: policies
                  value:
                    kind: v_list
                    items:
                      - kind: v_string
                        value: target-default
      - kind: workflow_block
        name: manual-approval
        props:
          - key: type
            value:
              kind: v_string
              value: suspend
      - kind: workflow_block
        name: deploy2prod
        props:
          - key: type
            value:
              kind: v_string
              value: deploy
          - key: properties
            value:
              kind: v_object
              props:
                - key: policies
                  value:
                    kind: v_list
                    items:
                      - kind: v_string
                        value: target-prod
                      - kind: v_string
                        value: deploy-ha
